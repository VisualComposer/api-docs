(self.webpackChunktest_docs=self.webpackChunktest_docs||[]).push([[487],{5818:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return r},toc:function(){return m},default:function(){return u}});var o=t(2122),a=t(9756),l=(t(7294),t(3905)),i={},s="Element Hook",r={unversionedId:"element-hook/element-hook",id:"element-hook/element-hook",isDocsHomePage:!1,title:"Element Hook",description:"Inside plugin\u2019s index.php file use vcv:api hook for any API call. To add an element you need to pass a path to manifest.json file and URL to the base directory of your element (see WordPress plugin example.)",source:"@site/docs/element-hook/element-hook.md",sourceDirName:"element-hook",slug:"/element-hook/element-hook",permalink:"/api-docs/element-hook/element-hook",editUrl:"https://github.com/VisualComposer/docs/element-hook/element-hook.md",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Element Structure",permalink:"/api-docs/element-structure/element-structure"},next:{title:"Attributes",permalink:"/api-docs/element-attributes/element-attributes"}},m=[],p={toc:m};function u(e){var n=e.components,t=(0,a.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"element-hook"},"Element Hook"),(0,l.kt)("p",null,"Inside plugin\u2019s ",(0,l.kt)("inlineCode",{parentName:"p"},"index.php")," file use ",(0,l.kt)("inlineCode",{parentName:"p"},"vcv:api")," hook for any API call. To add an element you need to pass a path to ",(0,l.kt)("inlineCode",{parentName:"p"},"manifest.json")," file and URL to the base directory of your element (see ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/wpbakery/vcwb-demo-element-example-plugin"},"WordPress plugin example"),".)"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"index.php")," file with hook example with a single element:\n",(0,l.kt)("inlineCode",{parentName:"p"},"index.php")," file with hook example with a single element:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"<?php\nadd_action(\n    'vcv:api',\n    function ($api) {\n        $api->elements->add(\n            '/var/www/absolute/path/to/element/myelement/manifest.json',\n            'http://mywordpress/url/to/element/basedirectory'\n        );\n    }\n);\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"index.php")," file with hook with 3 elements:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"<?php\nadd_action(\n/**\n * @param $api \\VisualComposer\\Modules\\Api\\Factory\n */\n    'vcv:api',\n    function ($api) {\n        $elementsToRegister = [\n            'logoSuperTest',\n            'textTest',\n            'imageGalleryWithTestZoom',\n        ];\n        $pluginBaseUrl = rtrim(plugins_url(basename(__DIR__)), '\\\\/');\n        /** @var \\VisualComposer\\Modules\\Elements\\ApiController $elementsApi */\n        $elementsApi = $api->elements;\n        foreach ($elementsToRegister as $tag) {\n            $manifestPath = __DIR__ . '/elements/' . $tag . '/manifest.json';\n            $elementBaseUrl = $pluginBaseUrl . '/elements/' . $tag;\n            $elementsApi->add($manifestPath, $elementBaseUrl);\n        }\n    }\n);\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"manifest.json")," file example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "elements": {\n    "imageGalleryWithTestZoom": {\n      "settings": {\n        "name": "Image Gallery With Test Zoom",\n        "metaThumbnailUrl": "[publicPath]/image-gallery-with-zoom-thumbnail.png",\n        "metaPreviewUrl": "[publicPath]/image-gallery-with-zoom-preview.png",\n        "metaDescription": "A grid type image gallery with a test zoom effect upon hover to catch visitors\' attention."\n      }\n    }\n  },\n  "categories": {\n    "Image gallery": {\n      "elements": [\n        "imageGalleryWithTestZoom"\n      ]\n    }\n  }\n}\n')))}u.isMDXComponent=!0}}]);