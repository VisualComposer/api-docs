"use strict";(self.webpackChunktest_docs=self.webpackChunktest_docs||[]).push([[28],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>v});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),s=c(n),u=i,v=s["".concat(p,".").concat(u)]||s[u]||m[u]||l;return n?a.createElement(v,r(r({ref:t},d),{},{components:n})):a.createElement(v,r({ref:t},d))}));function v(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[s]="string"==typeof e?e:i,r[1]=o;for(var c=2;c<l;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8786:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>s,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const l={},r="Public events API",o={unversionedId:"public-api/public-events",id:"public-api/public-events",isDocsHomePage:!1,title:"Public events API",description:"Public events are a part of a Public API. You can use Public events API to listen for specific changes whithin your custom elements. It is useful for reacting to events both in Editor and on View Page.",source:"@site/docs/public-api/public-events.md",sourceDirName:"public-api",slug:"/public-api/public-events",permalink:"/public-api/public-events",editUrl:"https://github.com/VisualComposer/api-docs/edit/main/docs/public-api/public-events.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Dynamic Content",permalink:"/dynamic-content/dynamic-content"},next:{title:"Services",permalink:"/public-api/services"}},p=[{value:"Event Registration",id:"event-registration",children:[]},{value:"Event Deregistration",id:"event-deregistration",children:[]},{value:"Event Triggering",id:"event-triggering",children:[]},{value:"Ready Event",id:"ready-event",children:[]},{value:"Usage example",id:"usage-example",children:[{value:"<code>ready</code> event",id:"ready-event-1",children:[]},{value:"<code>reInit</code> event",id:"reinit-event",children:[]}]}],c={toc:p},d="wrapper";function s(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"public-events-api"},"Public events API"),(0,i.kt)("p",null,"Public events are a part of a Public API. You can use Public events API to listen for specific changes whithin your custom elements. It is useful for reacting to events both in ",(0,i.kt)("strong",{parentName:"p"},"Editor")," and on ",(0,i.kt)("strong",{parentName:"p"},"View Page.")),(0,i.kt)("p",null,"All methods are available via ",(0,i.kt)("inlineCode",{parentName:"p"},"window.vcv")," global object."),(0,i.kt)("h2",{id:"event-registration"},"Event Registration"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"on(event, callback)")),(0,i.kt)("p",null,"Adds a listener to the specified event."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event")," (string): The name of the event to listen to."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callback")," (function): The function to be called when the event is triggered.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"window.vcv.on(event, callback)\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"once(event, callback)")),(0,i.kt)("p",null,"Adds a one-time listener to the specified event. The listener will be automatically removed after being called once."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event")," (string): The name of the event to listen to."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callback")," (function): The function to be called when the event is triggered.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"window.vcv.once(event, callback)\n")),(0,i.kt)("h2",{id:"event-deregistration"},"Event Deregistration"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"off(event, callback)")),(0,i.kt)("p",null,"Removes a listener from the specified event."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event")," (string): The name of the event to remove the listener from."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callback")," (function): The listener function to be removed.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"window.vcv.off(event, callback)\n")),(0,i.kt)("h2",{id:"event-triggering"},"Event Triggering"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"trigger(event, [args...])")),(0,i.kt)("p",null,"Triggers the specified event, calling all registered listeners."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event")," (string): The name of the event to trigger."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"args")," (any): Optional arguments to pass to the event listeners.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"window.vcv.trigger(event, [args...])\n")),(0,i.kt)("h2",{id:"ready-event"},"Ready Event"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ready(callback)")),(0,i.kt)("p",null,"Registers a one-time listener for the ",(0,i.kt)("inlineCode",{parentName:"p"},"ready")," event. The listener will be automatically removed after being called once."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callback"),' (function): The function to be called when the "ready" event is triggered.')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"window.vcv.ready(callback)\n")),(0,i.kt)("h2",{id:"usage-example"},"Usage example"),(0,i.kt)("p",null,"The common way to use Public events is to listen for the ",(0,i.kt)("inlineCode",{parentName:"p"},"ready")," event inside the public JavaScript file of your custom element."),(0,i.kt)("h3",{id:"ready-event-1"},(0,i.kt)("inlineCode",{parentName:"h3"},"ready")," event"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"ready")," event is triggered when the document is ready (the same way as the ",(0,i.kt)("a",{parentName:"p",href:"https://api.jquery.com/ready/"},"jQuery ",(0,i.kt)("inlineCode",{parentName:"a"},".ready()")),") "),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("inlineCode",{parentName:"p"},"ready")," event is triggered each time element is added to the page or gets edited (in VC editor). On the View Page it is triggered only once."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"function initialize () {\n  // do stuff for your custom element\n}\n\nwindow.vcv.on('ready', () => {\n  initialize()\n})\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"callback")," have multiple arguments ",(0,i.kt)("inlineCode",{parentName:"p"},"action"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"id"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"options"),". You can specify them to make conditional decisions."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"action")," (string): Actions like ",(0,i.kt)("inlineCode",{parentName:"li"},"add")," one element add, ",(0,i.kt)("inlineCode",{parentName:"li"},"update")," on element edit."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"id")," (string): Id of the element"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," (object): Optional argument, usually is present on ",(0,i.kt)("inlineCode",{parentName:"li"},"update")," event, that contains properties related to modified attribute:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"changedAttribute")," (string)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"changedAttributeType")," (object)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"disableUpdateAssets")," (boolean)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"disableUpdateComponent")," (boolean)")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"function initialize () {\n  // do stuff for your custom element\n}\n\nfunction update () {\n  // do stuff for your custom element\n}\n\nwindow.vcv.on('ready', (action, id, options) => {\n  if (action === 'add') {\n    initialize()\n  } else if (action === 'update') {\n    update()\n  }\n})\n")),(0,i.kt)("h3",{id:"reinit-event"},(0,i.kt)("inlineCode",{parentName:"h3"},"reInit")," event"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"reInit")," event is triggered when an element is re-rendered inside another ",(0,i.kt)("em",{parentName:"p"},"dynamic")," element, like Accordion. "),(0,i.kt)("p",null,"You can call your functions on ",(0,i.kt)("inlineCode",{parentName:"p"},"reInit")," event to recalculate or re-instantiate your scripts. It is needed to properly display ",(0,i.kt)("em",{parentName:"p"},"dynamic")," elements when they are hidden and re-appeared again ofter a specific action (e.g. after Accordion secion is closed and opened again)."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"callback")," have two arguments ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"id"),". You can specify them to make conditional decisions."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"action")," (string): Action is always ",(0,i.kt)("inlineCode",{parentName:"li"},"reInit"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"id")," (string): Id of the element")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"function initialize (element) {\n  // do stuff for your custom element\n}\n\nwindow.vcv.on('reInit', (action, id) => {\n  const element = document.getElementById(`el-${id}`)\n\n  initialize(element)\n})\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can view ready to use example of ",(0,i.kt)("inlineCode",{parentName:"p"},"ready")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"reInit")," events for the Image Slider element in our ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/VisualComposer/vcwb-demo-element-example-plugin/blob/master/elements/imageSlider/imageSlider/public/js/imageSlider.js"},"example plugin")," on GitHub."))))}s.isMDXComponent=!0}}]);